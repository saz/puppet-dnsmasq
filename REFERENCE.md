# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`dnsmasq`](#dnsmasq): Manage dnsmasq
* [`dnsmasq::reload`](#dnsmasq--reload): Class to reload dnsmasq when needed

#### Private Classes

* `dnsmasq::config`: This class manages the dnsmasq configuration file
* `dnsmasq::install`: This class manages the dnsmasq package
* `dnsmasq::service`: This class manages the dnsmasq service

### Defined types

* [`dnsmasq::conf`](#dnsmasq--conf): Manage a dnsmasq configuration fragment
* [`dnsmasq::dhcp_host`](#dnsmasq--dhcp_host): Manage a static DHCP host mapping in dnsmasq
* [`dnsmasq::host`](#dnsmasq--host): Manage static host entries in `/etc/hosts` and `/etc/ethers`

### Data types

* [`Dnsmasq::Params::Conf`](#Dnsmasq--Params--Conf): Type corresponding to dnsmasq::conf resource parameters
* [`Dnsmasq::Params::Dhcp_host`](#Dnsmasq--Params--Dhcp_host): Type corresponding to dnsmasq::dhcp_host resource parameters
* [`Dnsmasq::Params::Host`](#Dnsmasq--Params--Host): Type corresponding to dnsmasq::host resource parameters

## Classes

### <a name="dnsmasq"></a>`dnsmasq`

Manage dnsmasq

#### Examples

##### Basic usage

```puppet
include dnsmasq
```

#### Parameters

The following parameters are available in the `dnsmasq` class:

* [`binary_path`](#-dnsmasq--binary_path)
* [`config_dir`](#-dnsmasq--config_dir)
* [`config_file`](#-dnsmasq--config_file)
* [`configs_hash`](#-dnsmasq--configs_hash)
* [`dhcp_hosts_hash`](#-dnsmasq--dhcp_hosts_hash)
* [`hosts_hash`](#-dnsmasq--hosts_hash)
* [`package_ensure`](#-dnsmasq--package_ensure)
* [`package_name`](#-dnsmasq--package_name)
* [`purge_config_dir`](#-dnsmasq--purge_config_dir)
* [`reload_command`](#-dnsmasq--reload_command)
* [`service_control`](#-dnsmasq--service_control)
* [`service_ensure`](#-dnsmasq--service_ensure)
* [`service_enable`](#-dnsmasq--service_enable)
* [`service_name`](#-dnsmasq--service_name)

##### <a name="-dnsmasq--binary_path"></a>`binary_path`

Data type: `Stdlib::Absolutepath`

Location of the `dnsmasq` binary.

Default value: `'/usr/sbin/dnsmasq'`

##### <a name="-dnsmasq--config_dir"></a>`config_dir`

Data type: `Stdlib::Absolutepath`

Directory where configuration files generated by the module defined
resources are stored.

Default value: `'/etc/dnsmasq.d'`

##### <a name="-dnsmasq--config_file"></a>`config_file`

Data type: `Stdlib::Absolutepath`

Path to the main dnsmasq configuration file.

Default value: `'/etc/dnsmasq.conf'`

##### <a name="-dnsmasq--configs_hash"></a>`configs_hash`

Data type: `Hash[String[1], Dnsmasq::Params::Conf]`

A hash of configuration fragments to be managed using the `dnsmasq::conf`
defined resource.

Default value: `{}`

##### <a name="-dnsmasq--dhcp_hosts_hash"></a>`dhcp_hosts_hash`

Data type: `Hash[String[1], Dnsmasq::Params::Dhcp_host]`

A hash of static DHCP host definitions to be used with
`dnsmasq::dhcp_host` defined resource.

Default value: `{}`

##### <a name="-dnsmasq--hosts_hash"></a>`hosts_hash`

Data type: `Hash[String[1], Dnsmasq::Params::Host]`

A hash of host records to be managed with `dnsmasq::host` defined resource.

Default value: `{}`

##### <a name="-dnsmasq--package_ensure"></a>`package_ensure`

Data type: `String[1]`

Whether the dnsmasq package should be installed or removed.

Default value: `'installed'`

##### <a name="-dnsmasq--package_name"></a>`package_name`

Data type: `String[1]`

Name of the dnsmasq package.

Default value: `'dnsmasq'`

##### <a name="-dnsmasq--purge_config_dir"></a>`purge_config_dir`

Data type: `Boolean`

Whether to purge unmanaged files from the configuration directory.

Default value: `false`

##### <a name="-dnsmasq--reload_command"></a>`reload_command`

Data type: `String[1]`

Command to execute when dnsmasq configuration reload is required.

Default value: `"/usr/bin/systemctl reload ${service_name}"`

##### <a name="-dnsmasq--service_control"></a>`service_control`

Data type: `Boolean`

Whether the dnsmasq service should be managed by Puppet.

Default value: `true`

##### <a name="-dnsmasq--service_ensure"></a>`service_ensure`

Data type: `Enum['running', 'stopped']`

Whether the dnsmasq service should be running or stopped.

Default value: `'running'`

##### <a name="-dnsmasq--service_enable"></a>`service_enable`

Data type: `Boolean`

Whether the dnsmasq service should be enabled to start at boot.

Default value: `true`

##### <a name="-dnsmasq--service_name"></a>`service_name`

Data type: `String[1]`

Name of the dnsmasq service.

Default value: `'dnsmasq'`

### <a name="dnsmasq--reload"></a>`dnsmasq::reload`

Notify `dnsmasq` to reload changes from `/etc/hosts`, `/etc/ethers` or any
other file given by `--dhcp-hostsfile`, `--dhcp-optsfile` or `--addn-hosts`.

#### Parameters

The following parameters are available in the `dnsmasq::reload` class:

* [`command`](#-dnsmasq--reload--command)
* [`path`](#-dnsmasq--reload--path)

##### <a name="-dnsmasq--reload--command"></a>`command`

Data type: `String[1]`

Command to execute when reloading the dnsmasq configuration. When set, this
class can be used without including the main dnsmasq class.

Default value: `$dnsmasq::reload_command`

##### <a name="-dnsmasq--reload--path"></a>`path`

Data type: `Variant[Array[Stdlib::Absolutepath], String[1]]`

Path to search the command in.

Default value: `['/usr/bin', '/usr/sbin']`

## Defined types

### <a name="dnsmasq--conf"></a>`dnsmasq::conf`

This defined type creates or removes a configuration fragment file in the
dnsmasq configuration directory. Configuration fragments are typically used
to modularly manage dnsmasq settings, especially when multiple components
contribute to the overall configuration.

The fragment is created with a prioritized filename (`<prio>-<name>`) to
ensure correct ordering when dnsmasq reads the configuration files.

#### Examples

##### Using `content` to define inline configuration

```puppet
dnsmasq::conf { 'local-dns':
  content => 'address=/example.com/127.0.0.1',
}
```

##### Using `source` to deploy a static configuration file

```puppet
dnsmasq::conf { 'dhcp-settings':
  prio   => 30,
  source => 'puppet:///modules/site/dnsmasq/dhcp.conf',
}
```

#### Parameters

The following parameters are available in the `dnsmasq::conf` defined type:

* [`ensure`](#-dnsmasq--conf--ensure)
* [`content`](#-dnsmasq--conf--content)
* [`source`](#-dnsmasq--conf--source)
* [`prio`](#-dnsmasq--conf--prio)

##### <a name="-dnsmasq--conf--ensure"></a>`ensure`

Data type: `Enum['absent', 'present']`

Whether the configuration fragment should be present or absent.

Default value: `'present'`

##### <a name="-dnsmasq--conf--content"></a>`content`

Data type: `Optional[String[1]]`

The content to write directly into the configuration fragment.
Mutually exclusive with `source`.

Default value: `undef`

##### <a name="-dnsmasq--conf--source"></a>`source`

Data type: `Optional[Stdlib::Filesource]`

The source file to copy into the configuration fragment.
Mutually exclusive with `content`.

Default value: `undef`

##### <a name="-dnsmasq--conf--prio"></a>`prio`

Data type: `Variant[Integer[0, 999], String[1]]`

The priority (sort order) of the configuration fragment. Lower numbers are
loaded first.

Default value: `10`

### <a name="dnsmasq--dhcp_host"></a>`dnsmasq::dhcp_host`

This defined type creates or removes a static DHCP lease definition
(`dhcp-host=`) in dnsmasq configuration. It allows assigning a fixed IP
address and hostname to a client based on its MAC address.

The generated configuration fragment ensures predictable ordering using a priority,
and it notifies dnsmasq to reload via SIGHUP after changes.

#### Examples

##### Assign only a hostname to a MAC address (no fixed IP)

```puppet
dnsmasq::dhcp_host { 'guest-device':
  mac => '66:77:88:99:AA:BB',
}
```

##### Assign a hostname and IP address to a MAC address

```puppet
dnsmasq::dhcp_host { 'myclient':
  mac      => '00:11:22:33:44:55',
  hostname => 'myclient.local',
  ip       => '192.168.1.100',
}
```

#### Parameters

The following parameters are available in the `dnsmasq::dhcp_host` defined type:

* [`ensure`](#-dnsmasq--dhcp_host--ensure)
* [`hostname`](#-dnsmasq--dhcp_host--hostname)
* [`ip`](#-dnsmasq--dhcp_host--ip)
* [`mac`](#-dnsmasq--dhcp_host--mac)
* [`prio`](#-dnsmasq--dhcp_host--prio)

##### <a name="-dnsmasq--dhcp_host--ensure"></a>`ensure`

Data type: `Enum['present', 'absent']`

Whether this DHCP host entry should be present or absent.

Default value: `'present'`

##### <a name="-dnsmasq--dhcp_host--hostname"></a>`hostname`

Data type: `Stdlib::FQDN`

Optional hostname to assign to the client. If not provided, defaults to the
resource title.

Default value: `$name`

##### <a name="-dnsmasq--dhcp_host--ip"></a>`ip`

Data type: `Optional[Stdlib::IP::Address::Nosubnet]`

Optional fixed IP address to assign to the client. If not provided, only
the hostname will be used.

Default value: `undef`

##### <a name="-dnsmasq--dhcp_host--mac"></a>`mac`

Data type: `Stdlib::MAC`

MAC address of the client (required).

##### <a name="-dnsmasq--dhcp_host--prio"></a>`prio`

Data type: `Variant[Integer[0, 999], String[1]]`

The priority (sort order) of the configuration fragment. Lower numbers are
loaded first.

Default value: `99`

### <a name="dnsmasq--host"></a>`dnsmasq::host`

This defined type adds or removes an entry in `/etc/hosts` (and optionally
`/etc/ethers`) to allow dnsmasq to provide consistent DNS and DHCP responses
for a given hostname and IP.

The define supports optional MAC address binding via `/etc/ethers`, which can
be used by dnsmasq when integrated with DHCP or BOOTP services.

#### Examples

##### Define a host with IP, custom hostname, and DNS aliases

```puppet
dnsmasq::host { 'db-primary':
  ip       => '192.168.1.50',
  hostname => 'db01.example.com',
  aliases  => 'db-primary db-master',
}
```

##### Define a host with both IP and MAC address (for DHCP/DNS integration)

```puppet
dnsmasq::host { 'printer':
  ip       => '192.168.1.75',
  hostname => 'printer.local',
  mac      => '00:1A:2B:3C:4D:5E',
}
```

#### Parameters

The following parameters are available in the `dnsmasq::host` defined type:

* [`aliases`](#-dnsmasq--host--aliases)
* [`ensure`](#-dnsmasq--host--ensure)
* [`hostname`](#-dnsmasq--host--hostname)
* [`ip`](#-dnsmasq--host--ip)
* [`mac`](#-dnsmasq--host--mac)

##### <a name="-dnsmasq--host--aliases"></a>`aliases`

Data type: `Variant[String[1], Array[String[1]]]`

Optional space-separated list of additional DNS names for this host.

Default value: `[]`

##### <a name="-dnsmasq--host--ensure"></a>`ensure`

Data type: `Enum['present', 'absent']`

Whether the host entry should be 'present' or 'absent'.

Default value: `'present'`

##### <a name="-dnsmasq--host--hostname"></a>`hostname`

Data type: `Stdlib::FQDN`

Optional hostname; if not provided, defaults to the resource title.

Default value: `$name`

##### <a name="-dnsmasq--host--ip"></a>`ip`

Data type: `Stdlib::IP::Address::Nosubnet`

IP address associated with the host. Required.

##### <a name="-dnsmasq--host--mac"></a>`mac`

Data type: `Optional[Stdlib::MAC]`

Optional MAC address for use in `/etc/ethers`.

Default value: `undef`

## Data types

### <a name="Dnsmasq--Params--Conf"></a>`Dnsmasq::Params::Conf`

Type corresponding to dnsmasq::conf resource parameters

Alias of

```puppet
Struct[{
  Optional[ensure]  => Enum['absent', 'present'],
  Optional[prio]    => Variant[Integer[0, 999], String[1]],
  Optional[source]  => Stdlib::Filesource,
  Optional[content] => String[1],
}]
```

### <a name="Dnsmasq--Params--Dhcp_host"></a>`Dnsmasq::Params::Dhcp_host`

Type corresponding to dnsmasq::dhcp_host resource parameters

Alias of

```puppet
Struct[{
  mac                => Stdlib::MAC,
  Optional[hostname] => Stdlib::FQDN,
  Optional[ip]       => Stdlib::IP::Address::Nosubnet,
  Optional[prio]     => Variant[Integer[0, 999], String[1]],
  Optional[ensure]   => Enum['absent', 'present'],
}]
```

### <a name="Dnsmasq--Params--Host"></a>`Dnsmasq::Params::Host`

Type corresponding to dnsmasq::host resource parameters

Alias of

```puppet
Struct[{
  ip                 => Stdlib::IP::Address::Nosubnet,
  Optional[hostname] => Stdlib::FQDN,
  Optional[aliases]  => Variant[String[1], Array[String[1]]],
  Optional[mac]      => Stdlib::MAC,
  Optional[ensure]   => Enum['absent', 'present'],
}]
```

